---
description: 
globs: 
alwaysApply: true
---
## MANDATORY: Update tracking files after EVERY change

After EACH of the following (without exception):
- Creating or modifying any file
- Running any command that changes system state
- Completing a deployment step
- Encountering or resolving any error
- Before moving to a new task

You MUST:

### 1. Rotate Log (If Necessary)

**Before adding a new log entry**, ALWAYS run the log rotation script. This script handles checking if rotation is needed based on line count and performs the rotation automatically:
```bash
bash dev/scripts/rotate_dev_log.sh
```
This ensures the active log file remains manageable and archives older entries.

### 2. Update dev/development_log.md - Historical Record
Append the new entry (starting with a newline if the file is not empty or was just created by the rotation script) to the current `dev/development_log.md` using the following format:
```markdown
## [YYYY-MM-DD HH:MM] - Brief Action Title

### Changes Made
- Specific file changes or commands executed
- Include exact commands with outputs if relevant

### Current Status
- What's currently working
- What's currently broken
- Any errors encountered (with exact error messages)

### Next Steps
- Clear, actionable next steps
```

### 3. Update dev/current_context.md - Current State Snapshot
Replace the **entire** content of `dev/current_context.md` with the current state using this template:
```markdown
# Current Working Context
[Replace entire file with current state - this is NOT a log]

## Implementation Phase
- Current project phase (reference ProjectPlan.md)
- Specific component being worked on

## Working State
- What is currently working (specific features)
- What is not working/incomplete
- Recent changes made

## Current Blockers
- Active issues preventing progress
- Questions requiring answers
- Missing dependencies or configurations

## Next Steps
1. Next immediate action
2. Subsequent planned actions
3. Outstanding issues to address
```

**Important:** The `## Next Steps` section should list the *subsequent development actions* needed after the current changes are complete (and potentially committed). It should *not* list the act of committing the current changes itself, as the context file should represent the state *after* the commit.

## IMPORTANT GUIDELINES

1.  **Update First**: Always update tracking files BEFORE moving to a new task or ending work.
2.  **Rotate Log First**: Always run the rotation script `bash dev/scripts/rotate_dev_log.sh` *before* appending to `dev/development_log.md`.
3.  **Continuation Header**: The rotation script should handle creating the continuation header in the new log file.
4.  **Be Specific**: Include specific file names, commands, and error messages in the log.
5.  **Complete Replacement**: For `dev/current_context.md`, always replace the entire file content.
6.  **Timestamps**: Use accurate timestamps in `dev/development_log.md` entries.
7.  **No Skipping**: These updates (including running the rotation script first) are mandatory for ALL changes, no matter how small.

IMPORTANT: This is not optional. Every change requires running the rotation script and subsequent tracking file updates.
